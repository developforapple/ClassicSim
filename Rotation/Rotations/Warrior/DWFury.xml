<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<rotation class="Warrior" name="DW Fury High Rage" name_zh="双持狂暴战（打压制前不泄怒）" attack_mode="melee">
    <description>
        <en>A rotation for dual-wield fury that does not attempt to dump rage before switching to Battle Stance for Overpower.</en>
        <zh>双持狂暴战输出循环，在切换到战斗姿态释放压制前不泄怒</zh>
    </description>

    <precombat_actions>
        <spell name="Bloodrage" name_zh="血性狂暴"/>
        <spell name="Battle Shout" name_zh="战斗怒吼"/>
        <spell name="Berserker Stance" name_zh="狂暴姿态"/>
    </precombat_actions>

 1   <cast_if name="Berserker Rage" name_zh="狂暴之怒">
        <en>resource "Rage" less 50</en>
    </cast_if>

    <cast_if name="Battle Shout" name_zh="战斗怒吼">
        <en>buff_duration "Battle Shout" less 3
            or variable "time_remaining_execute" less 10
            and variable "time_remaining_execute" greater 0
            and buff_duration "Battle Shout" less 45</en>
        <zh>buff_duration "战斗怒吼" less 3
            or variable "time_remaining_execute" less 10
            and variable "time_remaining_execute" greater 0
            and buff_duration "战斗怒吼" less 45</zh>
    </cast_if>

    <!-- General heroic strike usage -->
    <cast_if name="Heroic Strike" name_zh="英勇打击">
        <en>variable "time_remaining_execute" greater 3
            and resource "Rage" greater 50</en>
    </cast_if>

1    <cast_if name="Manual Crowd Pummeler" name_zh="手动惩戒器"/>

1    <cast_if name="Kiss of the Spider" name_zh="蜘蛛之吻">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1   <cast_if name="Jom Gabbar" name_zh="沙虫之毒">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1    <cast_if name="Badge of the Swarmguard" name_zh="虫群卫士徽章">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1    <cast_if name="Slayer's Crest" name_zh="屠龙者的纹章">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1   <cast_if name="Earthstrike" name_zh="大地之击">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1    <cast_if name="Zandalarian Hero Medallion" name_zh="赞达拉英雄勋章">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1    <cast_if name="Diamond Flask" name_zh="钻石水瓶">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

1    <cast_if name="Cloudkeeper Legplates" name_zh="踏云腿甲">
        <en>buff_duration "Death Wish" is true</en>
        <zh>buff_duration "死亡之愿" is true</zh>
    </cast_if>

    <cast_if name="Death Wish" name_zh="死亡之愿">
        <en>variable "time_remaining_encounter" less 33
            or variable "time_remaining_execute" less 3
            or variable "time_remaining_execute" greater 180</en>
    </cast_if>

    <cast_if name="Recklessness" name_zh="鲁莽">
        <en>variable "time_remaining_execute" less 0
            or variable "time_remaining_encounter" less 20</en>
    </cast_if>

    <cast_if name="Blood Fury" name_zh="血性狂暴（种族特长）">
        <en>variable "time_remaining_execute" less 0
            and resource "Rage" less 50
            or variable "time_remaining_execute" greater 120</en>
    </cast_if>

    <cast_if name="Berserking" name_zh="狂暴">
        <en>variable "time_remaining_execute" less 0
            and resource "Rage" less 50
            or variable "time_remaining_execute" greater 180</en>
    </cast_if>

    <!-- Always cast Execute if available, unless melee AP is > 2000 and BT soon off cd. -->
    <cast_if name="Execute" name_zh="斩杀">
        <en>variable "melee_ap" leq 2000
            or spell "Bloodthirst" greater 1.0</en>
        <zh>variable "melee_ap" leq 2000
            or spell "嗜血" greater 1.0</zh>
    </cast_if>

    <!-- Always cast Bloodthirst if above 2k AP, or not in Execute range -->
    <cast_if name="Bloodthirst" name_zh="嗜血">
        <en>variable "time_remaining_execute" greater 0
            or variable "melee_ap" greater 2000</en>
    </cast_if>

    <!-- Whirlwind only if Bloodthirst on cooldown and not in Execute phase. -->
    <cast_if name="Whirlwind" name_zh="旋风斩">
        <en>spell "Bloodthirst" greater 1.5
            and variable "time_remaining_execute" greater 0</en>
        <zh>spell "嗜血" greater 1.5
            and variable "time_remaining_execute" greater 0</zh>
    </cast_if>

    <!-- Always cast Overpower if available. The implied condition checks that player is in correct stance, Overpower is active, etc. -->
1    <cast_if name="Overpower" name_zh="压制" />

    <cast_if name="Hamstring" name_zh="断筋">
        <en>spell "Bloodthirst" greater 1.5
            and variable "time_remaining_execute" greater 0
            and buff_duration "Overpower" is false</en>
        <zh>spell "嗜血" greater 1.5
            and variable "time_remaining_execute" greater 0
            and buff_duration "压制" is false</zh>
    </cast_if>

    <!-- Switch to Battle Stance -->
    <cast_if name="Battle Stance" name_zh="战斗姿态">
        <en>variable "time_remaining_execute" greater 5
            and buff_duration "Overpower" greater 2
            and spell "Bloodthirst" greater 3
            and resource "Rage" less 50</en>
        <zh>variable "time_remaining_execute" greater 5
            and buff_duration "压制" greater 2
            and spell "嗜血" greater 3
            and resource "Rage" less 50</zh>
        <!-- and variable "dumping_rage_before_stancing" is false -->
    </cast_if>

    <cast_if name="Berserker Stance" name_zh="狂暴姿态">
        <en>variable "time_remaining_execute" less 0
            or buff_duration "Overpower" is false</en>
        <zh>variable "time_remaining_execute" less 0
            or buff_duration "压制" is false</zh>
    </cast_if>
</rotation>